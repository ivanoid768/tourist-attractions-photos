(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a(250)},128:function(e,t,a){},132:function(e,t,a){},134:function(e,t,a){},136:function(e,t,a){},181:function(e,t,a){},187:function(e,t,a){},189:function(e,t,a){},214:function(e,t,a){},234:function(e,t,a){},236:function(e,t,a){},238:function(e,t,a){},240:function(e,t,a){},242:function(e,t,a){},244:function(e,t,a){},247:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),s=a.n(r),c=(a(128),a(121)),i=a(21),l=a(22),m=a(25),h=a(23),p=a(26),u=a(11),d=(a(130),a(132),a(256)),g=(a(134),function(e){return o.a.createElement("div",{className:"main_title"},o.a.createElement("div",{className:"title_cntr"},o.a.createElement("div",{className:"title"},"Best Tourist Attractions photos from best free photo sites")),o.a.createElement("div",{className:"logo_cntr"},o.a.createElement("div",{className:"logo"},o.a.createElement("a",{href:"https://pixabay.com/"},o.a.createElement("img",{src:"/imgs/logo_square.png",alt:"",className:"logo_img"}))),o.a.createElement("div",{className:"logo"},o.a.createElement("a",{href:"https://unsplash.com/"},o.a.createElement("img",{src:"/imgs/tbvbvipimh2camf5nb2q.webp",alt:"",className:"logo_img"}))),o.a.createElement("div",{className:"logo"},o.a.createElement("a",{href:"https://www.pexels.com/"},o.a.createElement("img",{src:"/imgs/Pexels_log.svg",alt:"",className:"logo_img"})))))}),_=a(252),f=a(20),v=(a(136),function(e){return o.a.createElement("div",{className:e.className},o.a.createElement(_.a,{to:"/",className:"menu_item menu_home"},o.a.createElement(f.a,{style:{fontSize:"25px"},theme:"filled",type:"home"})),o.a.createElement(_.a,{to:"/about",className:"menu_item menu_about"},"About"))}),b=(a(181),function(e){return o.a.createElement("header",null,o.a.createElement("div",{className:"header-description-bg-wide header-description"},o.a.createElement(g,null)),o.a.createElement("div",{className:"header-menu-bg-wide header-menu"},o.a.createElement(v,{className:"main_menu"}),o.a.createElement("div",{className:"search_cntr"},o.a.createElement(d.a.Search,{placeholder:"Search specific attractions by name, location etc. E.g. Eiffel Tower, Big Ben, Paris",onSearch:e.onSearch,onChange:e.onChange,size:"large",allowClear:!0,enterButton:!0}))))}),E=a(260),y=a(258),k=a(261),N=a(249),C=a(259),x=a(255),P=(a(187),function(e){var t="No any photo found for search request '".concat(e.search,"' :( Try search something else.");return o.a.createElement("div",{className:"no_photos_found_cntr"},o.a.createElement("span",{className:"no_photos_found_text"},t))}),w=(a(189),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).prev_page=e.match.params.page,a.paginationItemRender=a.paginationItemRender.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.photos&&this.props.photos.length>0?o.a.createElement("div",{style:{textAlign:"initial"}},o.a.createElement("div",null,o.a.createElement(N.a,{onChange:function(e){},current:this.props.paginationCurrent,pageSize:this.props.paginationPerPage,total:this.props.paginationTotal,itemRender:this.paginationItemRender,className:"pagination-cntr"}),o.a.createElement(C.a,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4,xl:3,xxl:3},dataSource:this.props.photos,renderItem:function(e){return o.a.createElement(C.a.Item,null,o.a.createElement(_.a,{to:"/photo/".concat(e.source_name,":").concat(e.id)},o.a.createElement(x.a,{hoverable:!0,title:o.a.createElement("span",{title:Y(e)},Y(e))},o.a.createElement("div",{style:{backgroundImage:"url(".concat(e.thumbnail_img,")")},className:"photo_cntr"}))))}}),o.a.createElement(N.a,{current:this.props.paginationCurrent,pageSize:this.props.paginationPerPage,total:this.props.paginationTotal,itemRender:this.paginationItemRender,className:"pagination-cntr"}))):o.a.createElement("div",{style:{textAlign:"initial"}},o.a.createElement("div",null,o.a.createElement(P,{search:this.props.search})))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.page;this.props.onGallaryPageChange(e)}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.page;e!==this.prev_page&&(this.prev_page=e,this.props.onGallaryPageChange(e))}},{key:"paginationItemRender",value:function(e,t,a){return e>0?"page"===t?o.a.createElement(_.a,{to:"/gallary/".concat(e)},o.a.createElement("div",{className:"pagination-page-cntr"},e)):-1!==["next","prev"].indexOf(t)?o.a.createElement(_.a,{to:"/gallary/".concat(e),className:"ant-pagination-item-link"},a.props.children):o.a.createElement(_.a,{to:"/gallary/".concat(e)},a.props.children):a}}]),t}(n.Component)),j=(a(214),function(e){return o.a.createElement("div",null,o.a.createElement("div",{className:"image_header_cntr"},o.a.createElement("div",{className:"img_author_cntr"},"Photographed by ",o.a.createElement("a",{href:e.author_link,className:"image_author",rel:"noopener noreferrer",target:"_blank"},e.author_name)),o.a.createElement("div",{className:"img_source_cntr"},"Provided by ",o.a.createElement("a",{className:"image_source_link",href:e.source_link,rel:"noopener noreferrer",target:"_blank"},o.a.createElement("b",null,e.source_name)))),o.a.createElement("img",{border:"0",className:"main_image",alt:e.main_image_link,src:e.main_image_link}),o.a.createElement("div",{className:"img_description"},Y(e)))}),O=a(251),I=a(34),S=a.n(I);function U(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function T(e,t,a){var n=(a=a||{}).expires;if("number"==typeof n&&n){var o=new Date;o.setTime(o.getTime()+1e3*n),n=a.expires=o}n&&n.toUTCString&&(a.expires=n.toUTCString());var r=e+"="+(t=encodeURIComponent(t));for(var s in a){r+="; "+s;var c=a[s];!0!==c&&(r+="="+c)}document.cookie=r}a(234);function R(e){var t=e.commentData;return o.a.createElement("li",{className:"comment"},o.a.createElement("div",{className:"comment_attrs"},o.a.createElement("div",{className:"comment_author"},t.author.name),o.a.createElement("div",{className:"comment_created_at"},t.createdAt)),o.a.createElement("div",{className:"comment_message"},t.raw_message),t.parent&&o.a.createElement("div",{className:"comment_replay"},o.a.createElement("b",null,"The replay to the: "),o.a.createElement("a",{href:"#".concat(t.parent.id)},t.parent.id)))}a(236);var D=function(e){var t=e.comments.map(function(e,t){return o.a.createElement(R,{commentData:e,key:t})});return o.a.createElement("ul",{className:"comments_cntr"},t)},q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).axi=S.a.create({baseURL:"https://disqus.com/api/3.0/",params:{api_key:"LF7U6m6DmxNiw3JrNV3Q8PjITsukfXrihnHriEcyQd5nlbJH8VfbHPVI3PEAmHzZ"},method:"get"}),a.state={comments:[],hasThread:!1,thread_id:null},a.commentsRequestDone=!1,a.newCommentPosted=a.newCommentPosted.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"comment_box"},o.a.createElement(H,{threadId:this.state.thread_id,hasThread:this.state.hasThread,photoId:this.props.photoId,newCommentPosted:this.newCommentPosted}),o.a.createElement(D,{comments:this.state.comments}))}},{key:"newCommentPosted",value:function(e){console.log("new_comment",e);var t=this.state.comments;t.push(e),this.setState({comments:t,hasThread:!0})}},{key:"getComments",value:function(e){return this.state.thread_id?this.axi.get("posts/list.json",{params:{thread:this.state.thread_id}}).then(function(e){return console.log("comments",e.data.response),e.data.response}):Promise.resolve(!1)}},{key:"getThread",value:function(e){if(!this.props.photoId)return Promise.resolve(!1);var t={forum:"tourist-attractions-photos"};return t["thread:ident"]=this.props.photoId,console.log(t),this.axi.get("threads/details.json",{params:t}).then(function(e){return console.log("thread",e.data),e.data.response}).catch(function(e){var t=!!e.response.data&&e.response.data.response;if(t&&-1!=t.indexOf("Unable to find thread"))return!1})}},{key:"componentDidUpdate",value:function(){var e=this;console.log("componentDidUpdate",this.state),this.state.hasThread||this.getThread(this.props.photoId).then(function(t){t&&e.setState({hasThread:!!t.id,thread_id:t.id})}),this.commentsRequestDone||this.getComments().then(function(t){t&&(e.commentsRequestDone=!0,e.setState({comments:t}))})}}]),t}(n.Component),A=(a(238),d.a.TextArea),H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isAuthenticated:!1,comment_value:"Please, type comment here..."},a.access_token=null,a.axi=S.a.create({baseURL:"https://disqus.com/api/3.0/",params:{api_key:"LF7U6m6DmxNiw3JrNV3Q8PjITsukfXrihnHriEcyQd5nlbJH8VfbHPVI3PEAmHzZ"},method:"post"}),a.postComment=a.postComment.bind(Object(u.a)(Object(u.a)(a))),a.createThread=a.createThread.bind(Object(u.a)(Object(u.a)(a))),a.onCommentChange=a.onCommentChange.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.state.isAuthenticated?o.a.createElement("div",{className:"new_comment_cntr"},o.a.createElement(A,{value:this.state.comment_value,autosize:{minRows:2,maxRows:8},cols:"50",onChange:this.onCommentChange,onPressEnter:this.postComment,className:"new_comment_textarea"}),o.a.createElement("div",{className:"new_comment_btn_cntr"},o.a.createElement(O.a,{onClick:this.postComment,className:"post_comment_btn"},"Post"))):o.a.createElement("div",{className:"new_comment_cntr"},o.a.createElement("div",{className:"auth_redirect_cntr"},o.a.createElement("a",{onClick:this.AuthorizeRedirect,href:"#",className:"authorize_redirect"},"Sign In Disqus")," to leave comments.")))}},{key:"AuthorizeRedirect",value:function(e){e.preventDefault();var t=window.location.pathname;T("pre_redirect_pathname","",{expires:-1}),T("pre_redirect_pathname",t,{expires:864e5,path:"/"}),window.location.assign("https://disqus.com/api/oauth/2.0/authorize/?client_id=".concat("LF7U6m6DmxNiw3JrNV3Q8PjITsukfXrihnHriEcyQd5nlbJH8VfbHPVI3PEAmHzZ","&scope=read,write&response_type=code&redirect_uri=https://blooming-garden-52718.herokuapp.com/disqus_api/access_token/"))}},{key:"createThread",value:function(){var e=this.props.photoId;return this.axi.request({url:"threads/create",params:{access_token:this.access_token,forum:"tourist-attractions-photos",title:e,identifier:e}}).then(function(e){return 0==e.data.code&&e.data.response})}},{key:"postComment",value:function(){var e=this;function t(t){return e.axi.request({url:"posts/create",params:{access_token:e.access_token,thread:t,message:e.state.comment_value}}).then(function(t){return 0==t.data.code&&(e.props.newCommentPosted(t.data.response),e.setState({comment_value:""}),t.data.response)})}return this.props.hasThread?t(this.props.threadId):this.createThread().then(function(e){var a=e.id;return t(a)})}},{key:"onCommentChange",value:function(e){this.setState({comment_value:e.target.value})}},{key:"componentDidMount",value:function(){var e=U("disqus_access_token");e&&(this.access_token=e,this.setState({isAuthenticated:!0}))}}]),t}(n.Component),L="tourist+attraction",z={usplash:J(),pexels:V(),pixabay:G()};function J(){var e=S.a.create({baseURL:"https://api.unsplash.com/search/photos",params:{query:L,order_by:"popular"},headers:{common:{Authorization:"Client-ID 0f349dea9c68a0c54614aa914b044480402bb816fa0cc21820ab83dcaa371b40"}}});return e.photo_list_name="results",e.photo_img_name="urls.small",e.total_photos="total",e}function V(){var e=S.a.create({baseURL:"https://api.pexels.com/v1/search",params:{query:'"tourist attraction"'},headers:{common:{Authorization:"563492ad6f9170000100000187d04447c7094a5c96e0dfd7119b3e7a"}}});return e.photo_list_name="photos",e.photo_img_name="src.tiny",e.total_photos="total_results",e}function G(){var e=S.a.create({baseURL:"https://pixabay.com/api/",params:{key:"11215352-991ab9a42a02be2db12b85705",q:L,image_type:"photo"}});return e.photo_list_name="hits",e.photo_img_name="webformatURL",e.total_photos="total",e}function B(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={page:a,per_page:n};if(o){var s=e.defaults.params.query?"query":"q",c=o.replace(/\s+/gi,"+");r[s]="".concat(c),"src.tiny"==e.photo_img_name&&(r[s]=r[s].replace(/\+/gi," "))}return e.get(null,{params:r}).then(function(a){return t=a.data[e.total_photos],a.data[e.photo_list_name]}).then(function(a){return a.forEach(function(t){!function(e,t){var a=t.split(".").reduce(function(e,t){return e[t]},e);e.thumbnail_img=a}(t,e.photo_img_name),M(t)}),{photos:a,total:parseInt(t)}}).catch(function(e){return console.log("getPhoto:Error ",e),{photos:[],total:0}})}function M(e){e.total_results&&(e.total=e.total_results),e.photographer_url?e.author_link=e.photographer_url:e.user_id?e.author_link="https://pixabay.com/en/users/"+e.user_id:e.user&&e.user.links&&e.user.links.html&&(e.author_link=e.user.links.html),e.photographer?e.author_name=e.photographer:e.user&&"string"==typeof e.user?e.author_name=e.user:e.user&&"object"==typeof e.user&&e.user.name&&(e.author_name=e.user.name),e.url?e.source_link=e.url:e.pageURL?e.source_link=e.pageURL:e.links&&e.links.html&&(e.source_link=e.links.html);var t=e.source_link.match(/http(?:s|):\/\/(?:www.|)([a-zA-Z]+).com/i)[1];return e.source_name=t.replace(t.charAt(0),t.charAt(0).toUpperCase()),e.src&&e.src.large2x?e.main_image_link=e.src.large2x:e.largeImageURL?e.main_image_link=e.largeImageURL:e.urls&&e.urls.regular&&(e.main_image_link=e.urls.regular),e}J(),V(),G();a(240);var Q=function(e){return o.a.createElement("div",{className:"no_single_photo_from_pexels_cntr"},o.a.createElement("div",{className:"no_single_photo_from_pexels_text_cntr"},o.a.createElement("div",{className:"no_single_photo_from_pexels_text"},"Right now we can't request for the photo to the Pixabay"),o.a.createElement("div",{className:"nspfp_link_cntr"},"To get the photo, please, visit "," ",o.a.createElement("a",{href:e.href,rel:"noopener noreferrer",target:"_blank",className:"no_single_photo_from_pexels_link"},"Pixabay.com"))))},F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={photo:null,direct_link:null},a.getPhoto=a.getPhoto.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.state.direct_link?o.a.createElement(Q,{href:this.state.direct_link}):o.a.createElement(j,this.state.photo),o.a.createElement(q,{photoId:this.state.photo?this.state.photo.id:null}))}},{key:"getPhoto",value:function(){var e,t=this,a=this.props.match.params.id.split(":")[1];if(console.log("id",this.props.match,this.props.photoCache),this.props.photoCache&&(e=this.props.photoCache[a]),this.props.photos&&!e){var n=this.props.photos.filter(function(e){return e.id==a});e=n[0]?n[0]:null}if(!e){var o=this.props.match.params.id.split(":");(o=o&&o[0]?o[0].toLowerCase():null)&&function(e,t){var a=t.toLowerCase(),n={unsplash:{source:"usplash",url:"https://api.unsplash.com/photos/"},pexels:{source:"pexels",url:"https://api.pexels.com/v1/photos/"}};return"unsplash"==a||"pexels"==a?z[n[a].source].request({url:n[a].url+e}).then(function(e){return M(e.data)}):"pixabay"==a?Promise.resolve(!1):void 0}(a,o).then(function(e){var n=e;n?(t.props.onPhotoCacheUpdate(n,a),t.setState({photo:n})):t.setState({direct_link:"https://pixabay.com/en/photos/".concat(a,"/")})})}e&&this.props.onPhotoCacheUpdate(e,a),e&&this.setState({photo:e})}},{key:"componentDidMount",value:function(){console.log("didMount",this.state),this.getPhoto()}},{key:"componentDidUpdate",value:function(){console.log("didUpdate",this.state)}}]),t}(o.a.Component),W=(a(242),a(244),function(e){return o.a.createElement("div",{className:"about_cntr"},o.a.createElement("div",{className:"about_lang_cntr"},o.a.createElement("span",{className:"about_lang"},"EN"),o.a.createElement("div",{className:"about_description"},"The site lets you to search for the best photos of Tourist Attractions from three top free photo stock resouces ",o.a.createElement("a",{href:"https://unsplash.com"},"Unsplash"),", ",o.a.createElement("a",{href:"https://pixabay.com"},"Pixabay"),", ",o.a.createElement("a",{href:"https://pexels.com"},"Pexels"),". Also you can leave comment to some photo via ",o.a.createElement("a",{href:"https://disqus.com"},"Disqus"),".")),o.a.createElement("div",{className:"about_lang_cntr"},o.a.createElement("span",{className:"about_lang"},"RU"),o.a.createElement("div",{className:"about_description"},"\u0414\u0430\u043d\u043d\u044b\u0439 \u0441\u0430\u0439\u0442 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043b\u0443\u0447\u0448\u0438\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043c\u0438\u0440\u043e\u0432\u044b\u0445 \u0434\u043e\u0441\u0442\u043e\u043f\u0440\u0435\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0435\u0439 \u0441\u0440\u0430\u0437\u0443 \u0441 \u0442\u0440\u0451\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 ",o.a.createElement("a",{href:"https://"},"Unsplash"),", ",o.a.createElement("a",{href:"https://"},"Pixabay"),", ",o.a.createElement("a",{href:"https://"},"Pexels"),". \u0410 \u0442\u0430\u043a \u0436\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u0432\u043e\u0435 \u043c\u043d\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0447\u0451\u0442 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0441\u0435\u0440\u0432\u0438\u0441\u0430 ",o.a.createElement("a",{href:"https://"},"Disqus"),".")),o.a.createElement("div",{className:"about_dev_cntr"},o.a.createElement("div",{className:"about_photo"}),o.a.createElement("div",{className:"about_desc_cont_cntr"},o.a.createElement("div",{className:"about_dev_description_en"},o.a.createElement("span",{className:"about_lang"},"EN"),"Hi, I'm Ivan. I'm software developer. I have developed many Web-App and Web-Services in last 3 years so I have a lot of experience. Programming is my profession my hobby and my passion. Contact me, and I'll bring you ideas to life!"),o.a.createElement("div",{className:"about_dev_description_ru"},o.a.createElement("span",{className:"about_lang"},"RU"),"\u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e. \u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0418\u0432\u0430\u043d. \u042f \u0440\u0430\u0437\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e \u0412\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438 \u0412\u0435\u0431-\u0441\u0435\u0440\u0432\u0438\u0441\u044b \u0443\u0436\u0435 \u0431\u043e\u043b\u0435\u0435 3-\u0445 \u043b\u0435\u0442. \u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043c\u0435\u043d\u044f \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f, \u043d\u043e \u0438 \u043c\u043e\u0435 \u0443\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u0435. \u0421\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441\u043e \u043c\u043d\u043e\u0439 \u043f\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u043c \u043d\u0438\u0436\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430\u043c \u0438 \u0432\u0430\u0448\u0430 \u0438\u0434\u0435\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u043f\u043e\u043b\u043e\u0449\u0435\u043d\u0430 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0438 \u0432 \u0441\u0440\u043e\u043a."),o.a.createElement("div",{className:"about_dev_contacts"},o.a.createElement("div",{className:"contact contacts_title"},"Contacts: "),o.a.createElement("a",{href:"mailto:ivanoid256@india.com",className:"contact"},"E-mail"),o.a.createElement("a",{href:"https://github.com/ivanoid768",className:"contact"},"Github")))))}),Z=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(m.a)(this,Object(h.a)(t).call(this,e));var n=window.localStorage.getItem("photoCache");return n=n?JSON.parse(n):{},a.state={photos:[],photoCache:n},a.onPhotosChange=a.onPhotosChange.bind(Object(u.a)(Object(u.a)(a))),a.onPhotoCacheUpdate=a.onPhotoCacheUpdate.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"content"},o.a.createElement(E.a,null,o.a.createElement(y.a,{exact:!0,from:"/",to:"/gallary/1"}),o.a.createElement(k.a,{path:"/gallary/:page",render:function(t){return o.a.createElement(w,Object.assign({},e.props.gallary,e.props.gallaryHandlers,t,{onPhotosChange:e.onPhotosChange}))}}),o.a.createElement(k.a,{exact:!0,path:"/gallary",render:function(t){return o.a.createElement(w,Object.assign({},t,{onPhotosChange:e.onPhotosChange}))}}),o.a.createElement(k.a,{path:"/photo/:id",render:function(t){return o.a.createElement(F,Object.assign({},t,{photos:e.props.gallary.photos,onPhotoCacheUpdate:e.onPhotoCacheUpdate,photoCache:e.state.photoCache}))}}),o.a.createElement(k.a,{exact:!0,path:"/",component:function(){return o.a.createElement("h1",null,"Homepage")}}),o.a.createElement(k.a,{exact:!0,path:"/about",component:W})))}},{key:"onPhotosChange",value:function(e){this.setState({photos:e})}},{key:"onPhotoCacheUpdate",value:function(e,t){var a=this.state.photoCache;a[t]=e,window.localStorage.setItem("photoCache",JSON.stringify(a)),this.setState({photoCache:a}),console.log(this.state.photoCache)}}]),t}(n.Component),X=(a(247),function(){return o.a.createElement("footer",null,o.a.createElement("div",{className:"developed-by"},o.a.createElement("span",null,"Developed by Ivanoid256: ")),o.a.createElement("div",{className:"contacts-cntr"},o.a.createElement("div",{className:"contacts"},o.a.createElement("div",{className:"email-cntr"},o.a.createElement("a",{href:"mailto:ivanoid256@india.com"},"E-mail")),o.a.createElement("div",{className:"github-cntr"},o.a.createElement("a",{href:"https://github.com/ivanoid768"},o.a.createElement("img",{src:"/imgs/GitHub_Logo.png",alt:"github.com/ivanoid256"}))))))}),$=function(e){function t(e){var a;Object(i.a)(this,t);return(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={gallary:{photos:[{}],search:null,paginationCurrent:1,paginationTotal:null,paginationPerPage:27,per_page:9}},a.gallary={},a.prev_search=!0,a.gallary.onGallaryPageChange=a.onGallaryPageChange.bind(Object(u.a)(Object(u.a)(a))),a.onSearch=a.onSearch.bind(Object(u.a)(Object(u.a)(a))),a.onChange=a.onChange.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement(b,{onSearch:this.onSearch,onChange:this.onChange}),o.a.createElement(Z,{gallaryHandlers:this.gallary,gallary:this.state.gallary,className:"Content"}),o.a.createElement(X,null)))}},{key:"onGallaryPageChange",value:function(e){var t=parseInt(e),a=this.state.gallary;a.paginationCurrent=t,this.setState({gallary:a}),this.getPhotos(e)}},{key:"getPhotos",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=[],n=this.state.gallary.per_page;Promise.all([B(z.usplash,t,n,this.state.gallary.search),B(z.pexels,t,n,this.state.gallary.search),B(z.pixabay,t,n,this.state.gallary.search)]).then(function(t){var n=t.map(function(e){return e.photos});return a=t.map(function(e){return e.total}),e.mixPhotosFromDiffSources(n)}).then(function(t){var o=e.state.gallary;o.photos=t;var r=e.getTotal(a,n);e.state.gallary.search!==e.prev_search&&(o.paginationTotal=r,e.prev_search=e.state.gallary.search),o.paginationPerPage=n*a.length,e.setState({gallary:o})})}},{key:"onSearch",value:function(e){console.log(e,this.props);var t=this.state.gallary;t.search=e,this.setState({gallary:t}),"/gallary/1"===this.props.location.pathname?this.getPhotos():e&&""!=e?this.props.history.push("/gallary/1?search=".concat(e)):this.props.history.push("/gallary/1")}},{key:"onChange",value:function(e){if(console.log("onInputChangeEvent ",e),e.target&&""===e.target.value){console.log(e.target.value);var t=this.state.gallary;t.search=null,this.setState({gallary:t})}}},{key:"mixPhotosFromDiffSources",value:function(e){for(var t=Math.max.apply(Math,Object(c.a)(e.map(function(e){return e.length}))),a=[],n=function(t){e.forEach(function(e){e[t]&&(e[t].id&&"string"!==typeof e[t].id&&(e[t].id=e[t].id.toString()),a.push(e[t]))})},o=0;o<t;o++)n(o);return a}},{key:"getDesc",value:function(e){var t=" ";return e.url&&"string"==typeof e.url&&(t=e.url.match(/photo\/([\w-]+)-\d+/i)[1].replace(/-/gi," ")),e.tags&&"string"==typeof e.tags&&(t=e.tags.replace(/,/gi,"")),e.description&&(t=e.description)," "===t?t:t.charAt(0).toUpperCase()+t.slice(1)}},{key:"getTotal",value:function(e){return e.reduce(function(e,t){return e+t},0)}}]),t}(n.Component),K=$,Y=(new $).getDesc;console.log("new Gallary().getDesc");var ee=a(257);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=window.location.search.match(/access_token=([^\s=&]+)/i);if(e){T("disqus_access_token",e=e[1],{expires:6048e5});var t=U("pre_redirect_pathname");console.log("pre_redirect_pathname",t),t&&window.history.pushState(null,null,window.location.origin+t)}}(),s.a.render(o.a.createElement(ee.a,{basename:"/tourist-attractions-photos"},o.a.createElement(k.a,{path:"/",component:K})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[123,2,1]]]);
//# sourceMappingURL=main.cf8f9abd.chunk.js.map